{% extends "mainpage/base.html" %}
{% load static %}
{% load static tailwind_tags %}

{% block title %}
    transactions
{% endblock %}
{% tailwind_css %}

{% block content %}
    <style>
        .raleway {
            font-family: "Raleway", sans-serif;
            font-optical-sizing: auto;
            font-weight: 500;
            font-style: normal;
            }
    </style>
    {% tailwind_css %}
</head>
<body>
    <div class="flex flex-row w-full raleway h-full">
        <div class="w-2/12 h-full bg-gradient-to-b from-[#6d171f]/[0.69] to-[#6d171f] hover:w-4/12 z-2 text-center font-bold transition-all duration-300 ease-in-out">
            <div class="flex flex-col gap p-3 text-white">
                <p class="text-4xl h-full overflow-y-auto p-4 border-4 rounded-xl border-[#d3a044] bg-gradient-to-r from-[#6d171f]/[0.8] to-[#d3a044]/[0.8] italic shadow-lg tracking-wide">
                    ADMIN PAGE
                </p>
                <br>
                <br>
                <div class="flex flex-col gap p-3 items-start justify-center h-full overflow-y-auto">
                    <button class="border-4 border-[#6d171f]/[0.9] bg-white bg-opacity-25  p-3 rounded-xl text-xl transition duration-300 ease-in-out hover:bg-opacity-50 hover:scale-105" onclick="location.href='/adminpage'">
                        Statistics
                    </button>
                    <br>
                    <button class="border-4 border-[#6d171f]/[0.9] bg-white bg-opacity-25 text-white p-3 rounded-xl text-xl transition duration-300 ease-in-out hover:bg-opacity-50 hover:scale-105" onclick="location.href='/transactions'">
                        Ticket History
                    </button>
                    <br>
                    <button class="border-4 border-[#6d171f]/[0.9] bg-white bg-opacity-25 text-white p-3 rounded-xl text-xl transition duration-300 ease-in-out hover:bg-opacity-50 hover:scale-105" onclick="location.href='/dev'">
                        Contact Developers
                    </button>
                    <br>
                    <button class="border-4 border-[#6d171f]/[0.9] bg-white bg-opacity-25 text-white p-3 rounded-xl text-xl transition duration-300 ease-in-out hover:bg-opacity-50 hover:scale-105" onclick="location.href='/scan'">
                        Ticket Scanning
                    </button>
                    <br>
                    <button class="border-4 border-[#6d171f]/[0.9] bg-white bg-opacity-25 text-white p-3 rounded-xl text-xl transition duration-300 ease-in-out hover:bg-opacity-50 hover:scale-105" onclick="location.href='/lostitems'">
                        Items
                    </button>
                    <br>
                    <button class="border-4 border-[#6d171f]/[0.9] bg-white bg-opacity-25 text-white p-3 rounded-xl text-xl transition duration-300 ease-in-out hover:bg-opacity-50 hover:scale-105" onclick="location.href='/feedback'">
                        Feedback
                    </button>
                    <br>
                    <button class="border-4 border-[#6d171f]/[0.9] bg-white bg-opacity-25 text-white p-3 rounded-xl text-xl transition duration-300 ease-in-out hover:bg-opacity-50 hover:scale-105" onclick="location.href='/logout'">
                        Logout
                    </button>
                </div>
                
            </div>
        </div>
        <div class="flex p-10 w-full flex-col animate-fade-right">
            <div class="bg-gradient-to-b from-[#1f2139]/[0.9] to-[#1f2139] text-white p-8 rounded-lg shadow-lg w-full max-w-screen-xl mx-auto h-full">
                <h2 class="text-2xl font-bold mb-6">Ticket History</h2>
                <table class="w-full bg-gradient-to-b from-[#6d171f]/[0.69] to-[#6d171f] rounded-lg overflow-hidden mb-8">
                    <thead class="bg-[#6d171f]/[0.9] text-white">
                        <tr>
                            <th class="p-3">Email ID</th>
                            <th class="p-3">Transaction ID</th>
                            <th class="p-3">Museum Name</th>
                            <th class="p-3">Date</th>
                            <th class="p-3">Cost</th>
                            <th class="p-3">Status</th>
                        </tr>
                    </thead>
                    <tbody class="text-white">
                        {% for x in trxns %}
                        <tr class="bg-[#6d171f]/[0.69] hover:bg-[#6d171f]/[0.8]">
                            <td class="p-3 text-center">{{x.cusname.email}}</td>
                            <td class="p-3 text-center">{{x.tic_id}}</td>
                            <td class="p-3 text-center">{{x.catname.name}}</td>
                            <td class="p-3 text-center">{{x.trxtime}}</td>
                            <td class="p-3 text-center">{{x.totalcost}}</td>
                            {% if not x.checked %}
                            <td class="p-3 text-center">Not Used</td>
                            {% else %}
                            <td class="p-3 text-center">Used</td>
                            {% endif %}
                            
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="bg-gradient-to-b from-[#1f2139]/[0.9] to-[#1f2139] text-white p-8 rounded-lg shadow-lg w-full max-w-screen-xl mx-auto h-full">
                <h2 class="text-2xl font-bold mb-6">Ticket History- Telegram</h2>
                <table class="w-full bg-gradient-to-b from-[#6d171f]/[0.69] to-[#6d171f] rounded-lg overflow-hidden mb-8">
                    <thead class="bg-[#6d171f]/[0.9] text-white">
                        <tr>
                            <th class="p-3">User ID</th>
                            <th class="p-3">First Name</th>
                            <th class="p-3">Place</th>
                            <th class="p-3">Quantity</th>
                            <th class="p-3">Cost</th>
                            <th class="p-3">Total Cost</th>
                            <th class="p-3">Timestamp</th>
                        </tr>
                    </thead>
                    <tbody class="text-white">
                        {% for x in tele_trxns %}
                        <tr class="bg-[#6d171f]/[0.69] hover:bg-[#6d171f]/[0.8]">
                            <td class="p-3 text-center">{{x.user_id}}</td>
                            <td class="p-3 text-center">{{x.first_name}}</td>
                            <td class="p-3 text-center">{{x.place}}</td>
                            <td class="p-3 text-center">{{x.quantity}}</td>
                            <td class="p-3 text-center">{{x.ticket_cost}}</td>
                            <td class="p-3 text-center">{{x.total_cost}}</td>
                            <td class="p-3 text-center">{{x.timestamp}}</td>                            
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</body>
{% endblock %}